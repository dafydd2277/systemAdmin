#version=RHEL8
# This is a deliberately incomplete kickstart file. That is, it's designed
# to have **most** of what you need, and then to use the visual installer
# open up for the remainder. So, here you'll get a custom filesystem layout,
# but you can still set your networking options at install time. Similarly, you
# could:
#
# - Set your default/starting root password.
# - Add a standard admin user.put a root password here
# - Define your standard package set.
# - Preset your time zone.
#
# Then, anything else you needed to do at install time, like set up your
# network connections, you could still do that through the interactive
# installer. See
#
# https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_an_advanced_rhel_installation/kickstart-commands-and-options-reference_installing-rhel-as-an-experienced-user#user_kickstart-commands-for-system-configuration
#
# for kickstart options with the RHEL 8 family of operating systems. See
#
# (https://github.com/dafydd2277/...)
#
# for instructions on how to add this file to a cdrom or USB flash drive.
#
# Find "CHANGEME" for some suggested things to include with a default setup.

# X Window System configuration information
xconfig  --startxonboot

# License agreement
eula --agreed

# Use the graphical installer
graphical
interactive

# Use CDROM installation media
cdrom

# Run the Setup Agent on first boot
firstboot --enable

# System services
services --enabled="chronyd"

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# System timezone
timezone America/Los_Angeles --isUtc

# Root password
rootpw --iscrypted CHANGEME

# Admin User
# (Don't use an obvious username, like "admin." Any step you can take to make
# a black-hat hacker's job harder is a good step.)
user --groups=wheel --name=athlete --password=CHANGEME --iscrypted --gecos="Admin User"


# Partition clearing information
ignoredisk --only-use=sda
clearpart --all --initlabel --drives=sda

# Disk partitioning information
part pv.01 --fstype="lvmpv" --ondisk=sda
part /boot --fstype="ext4" --ondisk=sda --size=2048
part swap --fstype="swap" --ondisk=sda --size=16384

volgroup vgRoot --pesize=4096 pv.01
logvol /              --fstype="xfs" --size=8192  --name=root        --vgname=vgRoot
logvol /home          --fstype="xfs" --size=16384 --name=home        --vgname=vgRoot
logvol /opt           --fstype="xfs" --size=8192  --name=opt         --vgname=vgRoot
logvol /tmp           --fstype="xfs" --size=8192  --name=tmp         --vgname=vgRoot
logvol /usr           --fstype="xfs" --size=8192  --name=usr         --vgname=vgRoot
logvol /var           --fstype="xfs" --size=8192  --name=var         --vgname=vgRoot
logvol /var/log       --fstype="xfs" --size=16384 --name=varLog      --vgname=vgRoot
logvol /var/log/audit --fstype="xfs" --size=16384 --name=varLogAudit --vgname=vgRoot

repo --name="AppStreamLocal" --baseurl=file:///run/install/repo/AppStream
repo --name="appstream" --mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=AppStream&infra=$infra
repo --name="baseos" --mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=BaseOS&infra=$infra
repo --name="EPEL" --install --metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-$releasever&arch=$basearch&infra=$infra&content=$contentdir


%packages
@^graphical-server-environment
@container-management
@debugging
@development
@graphical-admin-tools
@headless-management
@legacy-unix
@network-file-system-client
@performance
@remote-desktop-clients
@remote-system-management
@rpm-development-tools
@scientific
@security-tools
@system-tools
@web-server
kexec-tools
epel-release-latest
tree
glances
htop
syslinux


%end

%addon ADDON_placeholder --enable --reserve-mb=auto
%end

%anaconda
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty
%end
